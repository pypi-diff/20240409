# Comparing `tmp/vios-2.3.0-py3-none-any.whl.zip` & `tmp/vios-2.3.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,27 +1,27 @@
-Zip file size: 46683 bytes, number of entries: 25
--rw-rw-rw-  2.0 fat     2858 b- defN 24-Mar-19 11:19 quark/__main__.py
--rw-rw-rw-  2.0 fat    18952 b- defN 24-Apr-06 02:13 quark/proxy.py
--rw-rw-rw-  2.0 fat    18861 b- defN 24-Mar-21 10:46 quark/app/__init__.py
--rw-rw-rw-  2.0 fat     2575 b- defN 24-Mar-19 11:19 quark/app/_data.py
--rw-rw-rw-  2.0 fat    10205 b- defN 24-Mar-19 11:19 quark/app/demo.py
--rw-rw-rw-  2.0 fat     9043 b- defN 24-Mar-19 11:19 quark/app/task.py
--rw-rw-rw-  2.0 fat     5876 b- defN 24-Mar-19 11:19 quark/app/uapi.py
--rw-rw-rw-  2.0 fat     7914 b- defN 24-Mar-19 11:19 quark/driver/VirtualDevice.py
--rw-rw-rw-  2.0 fat      386 b- defN 24-Mar-19 11:19 quark/driver/__init__.py
--rw-rw-rw-  2.0 fat      217 b- defN 24-Mar-19 11:19 quark/driver/common/__init__.py
--rw-rw-rw-  2.0 fat     4478 b- defN 24-Mar-19 11:19 quark/driver/common/basedriver.py
--rw-rw-rw-  2.0 fat     4663 b- defN 24-Mar-19 11:19 quark/driver/common/quantity.py
--rw-rw-rw-  2.0 fat     5432 b- defN 24-Mar-19 11:19 quark/driver/common/visadriver.py
--rw-rw-rw-  2.0 fat     1188 b- defN 24-Mar-19 11:19 quark/envelope/__init__.py
--rw-rw-rw-  2.0 fat    15111 b- defN 24-Mar-19 11:19 quark/envelope/assembler.py
--rw-rw-rw-  2.0 fat     4322 b- defN 24-Mar-19 11:19 quark/envelope/calculator.py
--rw-rw-rw-  2.0 fat     1106 b- defN 24-Mar-19 11:19 quark/envelope/device.py
--rw-rw-rw-  2.0 fat     3758 b- defN 24-Mar-23 03:45 quark/envelope/processor.py
--rw-rw-rw-  2.0 fat     4258 b- defN 24-Apr-06 02:13 quark/envelope/router.py
--rw-rw-rw-  2.0 fat     2841 b- defN 24-Mar-21 12:16 quark/envelope/systemq.py
--rw-rw-rw-  2.0 fat     1085 b- defN 24-Apr-06 02:27 vios-2.3.0.dist-info/LICENSE
--rw-rw-rw-  2.0 fat     1211 b- defN 24-Apr-06 02:27 vios-2.3.0.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 24-Apr-06 02:27 vios-2.3.0.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        6 b- defN 24-Apr-06 02:27 vios-2.3.0.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     1995 b- defN 24-Apr-06 02:27 vios-2.3.0.dist-info/RECORD
-25 files, 128433 bytes uncompressed, 43507 bytes compressed:  66.1%
+Zip file size: 46737 bytes, number of entries: 25
+-rw-rw-rw-  2.0 fat     2858 b- defN 24-Mar-19 07:04 quark/__main__.py
+-rw-rw-rw-  2.0 fat    19142 b- defN 24-Apr-09 01:18 quark/proxy.py
+-rw-rw-rw-  2.0 fat    18861 b- defN 24-Mar-21 01:49 quark/app/__init__.py
+-rw-rw-rw-  2.0 fat     2575 b- defN 24-Mar-25 05:43 quark/app/_data.py
+-rw-rw-rw-  2.0 fat    10205 b- defN 24-Mar-19 07:04 quark/app/demo.py
+-rw-rw-rw-  2.0 fat     9043 b- defN 24-Mar-19 07:04 quark/app/task.py
+-rw-rw-rw-  2.0 fat     5876 b- defN 24-Mar-19 07:16 quark/app/uapi.py
+-rw-rw-rw-  2.0 fat     7914 b- defN 24-Mar-19 07:04 quark/driver/VirtualDevice.py
+-rw-rw-rw-  2.0 fat      386 b- defN 24-Mar-19 07:04 quark/driver/__init__.py
+-rw-rw-rw-  2.0 fat      217 b- defN 24-Mar-19 07:04 quark/driver/common/__init__.py
+-rw-rw-rw-  2.0 fat     4478 b- defN 24-Mar-19 07:04 quark/driver/common/basedriver.py
+-rw-rw-rw-  2.0 fat     4663 b- defN 24-Mar-19 07:04 quark/driver/common/quantity.py
+-rw-rw-rw-  2.0 fat     5432 b- defN 24-Mar-19 07:04 quark/driver/common/visadriver.py
+-rw-rw-rw-  2.0 fat     1188 b- defN 24-Mar-19 07:04 quark/envelope/__init__.py
+-rw-rw-rw-  2.0 fat    15111 b- defN 24-Mar-19 07:04 quark/envelope/assembler.py
+-rw-rw-rw-  2.0 fat     4322 b- defN 24-Mar-19 07:04 quark/envelope/calculator.py
+-rw-rw-rw-  2.0 fat     1106 b- defN 24-Mar-19 07:04 quark/envelope/device.py
+-rw-rw-rw-  2.0 fat     3758 b- defN 24-Mar-25 01:32 quark/envelope/processor.py
+-rw-rw-rw-  2.0 fat     4260 b- defN 24-Apr-09 01:07 quark/envelope/router.py
+-rw-rw-rw-  2.0 fat     2841 b- defN 24-Mar-25 01:32 quark/envelope/systemq.py
+-rw-rw-rw-  2.0 fat     1085 b- defN 24-Apr-09 01:19 vios-2.3.1.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat     1215 b- defN 24-Apr-09 01:19 vios-2.3.1.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 24-Apr-09 01:19 vios-2.3.1.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        6 b- defN 24-Apr-09 01:19 vios-2.3.1.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     1995 b- defN 24-Apr-09 01:19 vios-2.3.1.dist-info/RECORD
+25 files, 128629 bytes uncompressed, 43561 bytes compressed:  66.1%
```

## zipnote {}

```diff
@@ -54,23 +54,23 @@
 
 Filename: quark/envelope/router.py
 Comment: 
 
 Filename: quark/envelope/systemq.py
 Comment: 
 
-Filename: vios-2.3.0.dist-info/LICENSE
+Filename: vios-2.3.1.dist-info/LICENSE
 Comment: 
 
-Filename: vios-2.3.0.dist-info/METADATA
+Filename: vios-2.3.1.dist-info/METADATA
 Comment: 
 
-Filename: vios-2.3.0.dist-info/WHEEL
+Filename: vios-2.3.1.dist-info/WHEEL
 Comment: 
 
-Filename: vios-2.3.0.dist-info/top_level.txt
+Filename: vios-2.3.1.dist-info/top_level.txt
 Comment: 
 
-Filename: vios-2.3.0.dist-info/RECORD
+Filename: vios-2.3.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## quark/proxy.py

```diff
@@ -46,15 +46,15 @@
                             'level': level},
                            {'sink': path,
                             'rotation': '00:00',
                             'retention': '10 days',
                             'encoding': 'utf-8',
                             'level': level,
                             'backtrace': False, }]}
-    logger.add(path, rotation="20 MB")
+    # logger.add(path, rotation="20 MB")
     logger.configure(**config)
 
 
 def debug(circuit: list = [(('Measure', 0), 'Q1001')], tid: int = 0):
     from .app import get_config_by_tid
     from .envelope import ccompile, initialize
     initialize(get_config_by_tid(tid))
@@ -350,34 +350,34 @@
             self.progress.display()
             return
         self.handles[self.tid] = asyncio.get_running_loop(
         ).call_later(interval, self.refresh, *(interval,))
 
 
 def transpile(task: dict):
-    quafuos = str(Path.home()/'Desktop/qusteed0.1.2')
+    quafuos = str(Path.home()/'Desktop/qusteed/0.1.4')
     if quafuos not in sys.path:
         print('adding quafuos', quafuos)
         sys.path.append(quafuos)
 
     circuit = task.get('circuit', '')
     qasm = ''
-    if isinstance(circuit, str):
+    if not isinstance(circuit, list):
         from ._cloud import openqasm_to_qlisp
-        if task.get('compile', True):
-            from qusteedAPIs import call_transpiler_api
-            qasm, final_qubit2cbit, compiled_circuit_information = call_transpiler_api(
-                input_circuit=circuit,
-                compile=task.get('compile', True),
-                backend=task.get('chip', ''))
-            # import compiler
-            # transpile
-        else:
-            print('nononononoonoo compile')
-            qasm = circuit
+        # if task.get('compile', True):
+        from qusteedAPIs import call_transpiler_api
+        qasm, final_qubit2cbit, compiled_circuit_information = call_transpiler_api(
+            input_circuit=circuit,
+            compile=task.get('compile', True),
+            backend=task.get('chip', ''))
+        # import compiler
+        # transpile
+        # else:
+        #     print('nononononoonoo compile')
+        #     qasm = circuit
 
         circuit, qubits = openqasm_to_qlisp(qasm)
 
     qlisp = ',\n'.join([str(op) for op in circuit])
     logger.info(f"\n{'>'*36}qasm:\n{qasm}\n{'>'*36}qlisp:\n[{qlisp}]")
 
     measure = []
@@ -385,15 +385,15 @@
         if isinstance(ops[0], tuple) and ops[0][0] == 'Measure':
             measure.append((ops[0][1], ops[1]))
     return qasm, [circuit], measure
 
 
 def update(backend: str, info: dict, token: str = ''):
 
-    quafuos = str(Path.home()/'Desktop/qusteed0.1.1')
+    quafuos = str(Path.home()/'Desktop/qusteed/0.1.4')
     if quafuos not in sys.path:
         print('adding quafuos', quafuos)
         sys.path.append(quafuos)
     with open(f'{backend}.json', 'w') as f:
         f.write(json.dumps(info, indent=4))
     from qusteedAPIs import call_local_backend_api
     call_local_backend_api(backend=backend, chip_info_dict=info)
@@ -494,25 +494,26 @@
                 ran_pos = np.searchsorted(tmp, ran_num)
                 ret[list(ret.keys())[ran_pos]] -= 1
                 if ret[list(ret.keys())[ran_pos]] == 0:
                     ret.pop(list(ret.keys())[ran_pos], 0)
                 num -= 1
 
         meta = result['meta']
+        coqis = meta.get('coqis', {})
         status = 'failed'
         if meta['status'] in ['Finished', 'Archived']:
             try:
                 # data: list[dict] = result['data']['count']
                 data: list[np.ndarray] = result['data']['count']
                 status = 'finished'
             except Exception as e:
                 logger.error(f'Failed to postprocess result: {e}')
 
+        dres, cdres = {}, {}
         if status == 'finished':
-            dres = {}
             for dat in data:
                 # for k, v in dat.items():  # dat[()][0]
                 #     dres[k] = dres.get(k, 0)+v
                 for kv in dat:
                     if kv[-1] < 0:
                         continue
                     base = tuple(kv[:-1]-1)  # from 1&2 to 0&1
@@ -523,25 +524,30 @@
                     shots = meta['other']['shots'] * \
                         len(meta['axis']['repeat']['repeat'])
                     _delete_dict(dres, shots - (shots//1000)*1000)
             except Exception as e:
                 logger.error(f'Failed to dropout: {e}')
 
             try:
-                # if meta['coqis']['correct']:
-                from home.ylfeng.cloud import correct_readout
-                cdres = correct_readout(dres, meta['other']['measure'])
+                if meta['coqis']['correct']:
+                    from home.ylfeng.cloud import correct_readout
+                    cdres = correct_readout(dres, meta['other']['measure'])
+                else:
+                    cdres = {}
             except Exception as e:
                 cdres = dres
                 logger.error(f'Failed to correct readout, {e}!')
 
         ret = {'count': {''.join((str(i) for i in k)): v for k, v in dres.items()},
                'corrected': {''.join((str(i) for i in k)): v for k, v in cdres.items()},
-               'transpiled': meta['coqis']['qasm'] if meta['coqis']['compile'] else '',
-               'status': status,
+               'transpiled': coqis.get('qasm', ''),
+               'qlisp': coqis.get('qlisp', ''),
+               'tid': meta['tid'],
+               'finished': meta['finished'],
+               'status': status
                }
         return ret
 
     def sysinfo(self):
         return self.server.sysinfo(False)
 
     def snr(self, data):
```

## quark/envelope/router.py

```diff
@@ -80,21 +80,20 @@
                   'created': '2024-03-12-23-06-15',
                   'finished': '2024-03-12-23-06-17'}
         }
         ``` 
     """
 
     # print(result.keys(),result['meta'].keys())
+    res = QuarkProxy.process(result, True)
 
     quafu = result['meta'].get('coqis', {})
     # savefig(result)
     if not quafu.get('token', '') or not quafu.get('eid', ''):
-        return
-
-    res = QuarkProxy.process(result, True)
+        return res
 
     rshot = 0
     post_data = {"task_id": quafu['eid'],
                  "status": res['status'],
                  "raw": "",
                  "res": "",
                  'transpiled_circuit': res['transpiled'],
```

## Comparing `vios-2.3.0.dist-info/LICENSE` & `vios-2.3.1.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `vios-2.3.0.dist-info/METADATA` & `vios-2.3.1.dist-info/METADATA`

 * *Files 8% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: vios
-Version: 2.3.0
+Version: 2.3.1
 Summary: runtime requirements for systemq
 Author-email: YL Feng <fengyl@baqis.ac.cn>
 Project-URL: homepage, https://gitee.com
 Project-URL: bugs, https://gitee.com
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Intended Audience :: Developers
 Classifier: Intended Audience :: Science/Research
@@ -24,16 +24,16 @@
 Requires-Dist: loguru
 Requires-Dist: cython
 Requires-Dist: gitpython
 Requires-Dist: waveforms
 Requires-Dist: pyvisa
 Requires-Dist: pyserial
 Provides-Extra: full
-Requires-Dist: quarkstudio[full] >=6.5.0 ; extra == 'full'
-Requires-Dist: waveforms-math >=1.0.0 ; extra == 'full'
+Requires-Dist: quarkstudio[full] (>=6.5.0) ; extra == 'full'
+Requires-Dist: waveforms-math (>=1.0.0) ; extra == 'full'
 
 ...
```

## Comparing `vios-2.3.0.dist-info/RECORD` & `vios-2.3.1.dist-info/RECORD`

 * *Files 7% similar despite different names*

```diff
@@ -1,9 +1,9 @@
 quark/__main__.py,sha256=ky318p_RHmGRdMyzIL2meu-JOgqzRrH-hWfFvhceZGE,2858
-quark/proxy.py,sha256=bHvoQZ1BRFAgZbxbA5Oy1R-oH4vT3Nn359S7j3DAzKg,18952
+quark/proxy.py,sha256=lXEO3EC1d7pWmB1WHOI0NJojl_GCN_UyrvNRVF_yi8o,19142
 quark/app/__init__.py,sha256=MjOh4mkjvwFzEEfPNv-dMOcoktAtYCBtl-P5_UA7MzQ,18861
 quark/app/_data.py,sha256=EGGTD2FrZ8vlbMh4jlmWhYk4fEG3FolGoWaQ26qxoss,2575
 quark/app/demo.py,sha256=eod5vSXKB0XI-Rr8UVKkNc9tOUfWCjI109Imd8bKmuo,10205
 quark/app/task.py,sha256=QEZuNia59sLEWa8pl2XIjItx2NismSTPZFnFt8-90HM,9043
 quark/app/uapi.py,sha256=itjEa89SUXozZqBGLH-3o4mKtRssNQODDj60knC-cGE,5876
 quark/driver/VirtualDevice.py,sha256=Cswl_ykFhIsocGV6Okh_YS1b48FeLm2fh1ruXqmNoyw,7914
 quark/driver/__init__.py,sha256=p1pVx1xTulBT8-qdp_zJ859tdIsA92XdvwrkqcVHL4s,386
@@ -12,14 +12,14 @@
 quark/driver/common/quantity.py,sha256=fV9DMmjys44efe7TTvzXmFdozqGdS2QUm23wtfLxeBE,4663
 quark/driver/common/visadriver.py,sha256=LRyYDBF0u9EYf6p47LeGGKhx9pHiq4pux_pzDakaICY,5432
 quark/envelope/__init__.py,sha256=5_cs0tZ7mV4GjOsY2isx8sUQu4u6Y3WN-9DUGG27SQM,1188
 quark/envelope/assembler.py,sha256=ENwX7FutJvpg6_Wcm42_Zx-ddq40JozuYqHPwJp09ZA,15111
 quark/envelope/calculator.py,sha256=0rZAA46sWh_X8wOBmpBvmljqCV53ID4VHPX1cE_abEc,4322
 quark/envelope/device.py,sha256=5E3oWZ84IYnQdzlmzltgPyayYz_au7p7UIbFVpJUa0Q,1106
 quark/envelope/processor.py,sha256=uMIwu83a4SDZVM3OE5_WrBya_4jxtdcXPd6pYa0osrk,3758
-quark/envelope/router.py,sha256=-Qxhd4qmMsJU_Ik7YDdERmmesegB4-19y9S-JoyE1HM,4258
+quark/envelope/router.py,sha256=vlzzOu7CQgLAryOxb-bJXuTtiNXiE005WqbpS90_RZs,4260
 quark/envelope/systemq.py,sha256=QAaHLv68C9UjMp9qHt9t-HJkOTpCkbHZTlNVOsAzIBc,2841
-vios-2.3.0.dist-info/LICENSE,sha256=B_BP5ebph3-SqRxXvo-6Bh7vzPL2nPY5qSFQfr7xM_s,1085
-vios-2.3.0.dist-info/METADATA,sha256=RjgcCKQftPzzTWbdjaqg-cVFuTruBdHqqAeo8LqvOBI,1211
-vios-2.3.0.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
-vios-2.3.0.dist-info/top_level.txt,sha256=7SspgYXMW_50_NVkPj0EbFg4jFlGVsaIDfpqNsA1IMY,6
-vios-2.3.0.dist-info/RECORD,,
+vios-2.3.1.dist-info/LICENSE,sha256=B_BP5ebph3-SqRxXvo-6Bh7vzPL2nPY5qSFQfr7xM_s,1085
+vios-2.3.1.dist-info/METADATA,sha256=jweimWYtQHVZFEEFDFXaEI-ASReGe6TM58M21SqIv_g,1215
+vios-2.3.1.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+vios-2.3.1.dist-info/top_level.txt,sha256=7SspgYXMW_50_NVkPj0EbFg4jFlGVsaIDfpqNsA1IMY,6
+vios-2.3.1.dist-info/RECORD,,
```

